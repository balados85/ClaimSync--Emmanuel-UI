package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import entities.*;
import java.util.List;
import java.util.Date;
import java.text.SimpleDateFormat;
import java.text.DateFormat;

public final class consultingroom_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.ArrayList<String>(7);
    _jspx_dependants.add("/widgets/stylesheets.jsp");
    _jspx_dependants.add("/widgets/header.jsp");
    _jspx_dependants.add("/widgets/subhead.jsp");
    _jspx_dependants.add("/widgets/loading.jsp");
    _jspx_dependants.add("/widgets/leftsidebar.jsp");
    _jspx_dependants.add("/widgets/footer.jsp");
    _jspx_dependants.add("/widgets/javascripts.jsp");
  }

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("    <head>\n");
      out.write("        ");
      out.write("<meta charset=\"utf-8\"/>\n");
      out.write("<title>ClaimSync ERM</title>\n");
      out.write("<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n");
      out.write("<meta name=\"description\" content=\"\">\n");
      out.write("<meta name=\"author\" content=\"\">\n");
      out.write("\n");
      out.write("<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->\n");
      out.write("<!--[if lt IE 9]>\n");
      out.write("<script src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"></script>\n");
      out.write("<![endif]-->\n");
      out.write("\n");
      out.write("<!-- Le styles -->\n");
      out.write("<link href=\"css/bootstrap.min.css\" rel=\"stylesheet\">\n");
      out.write("<link href=\"css/bootstrap-responsive.css\" rel=\"stylesheet\">\n");
      out.write("<link type=\"text/css\" href=\"css/custom-theme/jquery-ui-1.8.16.custom.css\" rel=\"stylesheet\" />\n");
      out.write("<link href=\"css/docs.css\" rel=\"stylesheet\">\n");
      out.write("<link rel=\"stylesheet\" href=\"css/styles.css\">\n");
      out.write("<style type=\"text/css\" title=\"currentStyle\">\n");
      out.write("    @import \"css/jquery.dataTables_themeroller.css\";\n");
      out.write("    @import \"css/custom-theme/jquery-ui-1.8.16.custom.css\";\n");
      out.write("</style>\n");
      out.write("<link href=\"css/tablecloth.css\" rel=\"stylesheet\" type=\"text/css\" media=\"screen\" />\n");
      out.write("\n");
      out.write("        <script type=\"text/javascript\">\n");
      out.write("            \n");
      out.write("            var diagnosis = \"\";\n");
      out.write("            var treatment = \"\";\n");
      out.write("            var investigation = \"\";\n");
      out.write("            var d =\"\";\n");
      out.write("            \n");
      out.write("            function showdetails(id){\n");
      out.write("                var show = document.getElementById(id);\n");
      out.write("                if(show.style.display == \"none\"){\n");
      out.write("                    show.style.display=\"block\";\n");
      out.write("                }else{\n");
      out.write("                    // show.style.display = \"block\"\n");
      out.write("                    show.style.display=\"none\";             \n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("            function showdTreatment(){\n");
      out.write("                var show = document.getElementById(\"treat\");\n");
      out.write("                if(show.style.display == \"none\"){\n");
      out.write("                    show.style.display=\"block\";\n");
      out.write("                }else{\n");
      out.write("                    // show.style.display = \"block\"\n");
      out.write("                    show.style.display=\"none\";             \n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("            function showdInvestigation(){\n");
      out.write("                var show = document.getElementById(\"lab\");\n");
      out.write("                if(show.style.display == \"none\"){\n");
      out.write("                    show.style.display=\"block\";\n");
      out.write("                }else{\n");
      out.write("                    // show.style.display = \"block\"\n");
      out.write("                    show.style.display=\"none\";             \n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("            function addDiagnosis(){               \n");
      out.write("                var diag = document.getElementById(\"diagnosis\").value;\n");
      out.write("                diagnosis = diagnosis+\"<>\"+diag;\n");
      out.write("               \n");
      out.write("                document.getElementById(\"dd\").value = diagnosis;\n");
      out.write("                \n");
      out.write("            }\n");
      out.write("            function addTreatment(){               \n");
      out.write("                var treat = document.getElementById(\"treatment\").value;                \n");
      out.write("                treatment = treatment+\"<>\"+treat;                \n");
      out.write("                document.getElementById(\"tt\").value=treatment;\n");
      out.write("                 \n");
      out.write("            }\n");
      out.write("            function addDosage(){ \n");
      out.write("                var treat = document.getElementById(\"dosage\").value;  \n");
      out.write("                treatment = treatment+\"><\"+treat;                \n");
      out.write("                document.getElementById(\"tt\").value=treatment;\n");
      out.write("            }\n");
      out.write("            function addType(){  \n");
      out.write("                var treat = document.getElementById(\"drugtype\").value;                \n");
      out.write("                treatment = treatment+\"><\"+treat;                \n");
      out.write("                document.getElementById(\"tt\").value=treatment;\n");
      out.write("                 \n");
      out.write("            }\n");
      out.write("            function addQuantity(){ \n");
      out.write("                var treat = document.getElementById(\"qty\").value;                \n");
      out.write("                treatment = treatment+\"><\"+treat;                \n");
      out.write("                document.getElementById(\"tt\").value=treatment;\n");
      out.write("                 \n");
      out.write("            }\n");
      out.write("            function addInvestigation(){                \n");
      out.write("                var treat = document.getElementById(\"test\").value;             \n");
      out.write("                investigation = investigation+\"<>\"+treat;               \n");
      out.write("                document.getElementById(\"lb\").value=investigation;\n");
      out.write("               \n");
      out.write("            }\n");
      out.write("        </script>\n");
      out.write("    </head>\n");
      out.write("\n");
      out.write("\n");
      out.write("    <body data-spy=\"scroll\" data-target=\".subnav\" data-offset=\"50\">\n");
      out.write("\n");
      out.write("        ");
      out.write("<!-- Navbar\n");
      out.write("        ================================================== -->\n");
      out.write("<div style=\"display: none;\"  class=\"navbar navbar-fixed-top hide\">\n");
      out.write("    <div class=\"navbar-inner\">\n");
      out.write("        <div class=\"container\">\n");
      out.write("            <a class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\"> <span class=\"icon-bar\"></span> <span class=\"icon-bar\"></span> <span class=\"icon-bar\"></span> </a>\n");
      out.write("            <a class=\"brand\" href=\"../\"><img src=\"images/logo.png\" width=\"200px;\" /></a>\n");
      out.write("\n");
      out.write("            <div style=\"margin-top: 10px;\" class=\"nav-collapse\">\n");
      out.write("                <ul class=\"nav pull-right\">\n");
      out.write("\n");
      out.write("                    <li class=\"dropdown\">\n");
      out.write("                        <a class=\"active\" > Logged in as:  Mr. Amoo </a>\n");
      out.write("\n");
      out.write("                    </li>\n");
      out.write("                    <li class=\"divider-vertical\"></li>\n");
      out.write("\n");
      out.write("                    <li class=\"dropdown\">\n");
      out.write("                        <a class=\"dropdown-toggle\" data-toggle=\"dropdown\" href=\"#\"><i class=\"icon-user\"></i> Account <b class=\"caret\"></b></a>\n");
      out.write("                        <ul class=\"dropdown-menu\">\n");
      out.write("\n");
      out.write("                            <li>\n");
      out.write("                                <a target=\"_blank\" href=\"bootstrap.min.css\"><i class=\"icon-wrench\"></i> Settings </a>\n");
      out.write("                            </li>\n");
      out.write("\n");
      out.write("                            <li>\n");
      out.write("                                <a target=\"_blank\" href=\"bootstrap.css\"><i class=\"icon-question-sign\"></i> Help </a>\n");
      out.write("                            </li>\n");
      out.write("                            <li class=\"divider\"></li>\n");
      out.write("\n");
      out.write("                            <li>\n");
      out.write("                                <a target=\"_blank\" href=\"variables.less\"><i class=\"icon-off\"></i> Log Out</a>\n");
      out.write("                            </li>\n");
      out.write("\n");
      out.write("                        </ul>\n");
      out.write("\n");
      out.write("                    </li>\n");
      out.write("                </ul>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("    </div>\n");
      out.write("</div>");
      out.write("\n");
      out.write("\n");
      out.write("        <div class=\"container-fluid\">\n");
      out.write("            ");
      out.write(" <!-- Masthead\n");
      out.write("            ================================================== -->\n");
      out.write("            <header  class=\"jumbotron subhead \" id=\"overview\">\n");
      out.write("\n");
      out.write("                <div style=\"margin-top: 20px; margin-bottom: -50px; display: none; \" class=\"subnav  hide \">\n");
      out.write("                    <ul class=\"nav nav-pills navbar-fixed-top\">\n");
      out.write("\n");
      out.write("                    </ul>\n");
      out.write("                </div>\n");
      out.write("\n");
      out.write("            </header>");
      out.write("\n");
      out.write("\n");
      out.write("            ");
      out.write("<div style=\"position: absolute; left: 30%; top: 200px; text-align: center;\" class=\"progress1\">\n");
      out.write("    <img src=\"images/logoonly.png\" width=\"136px;\" style=\"margin-bottom: 20px;\" />\n");
      out.write("    <a href=\"#\"> <h3 class=\"segoe\" style=\"text-align: center; font-weight: lighter;\"> Your page is taking longer than expected to load.....\n");
      out.write("            <br />\n");
      out.write("            Please be patient!</h3>\n");
      out.write("        <br />\n");
      out.write("    </a>\n");
      out.write("    <div  class=\"progress progress-striped active span5\">\n");
      out.write("\n");
      out.write("        <div class=\"bar\"\n");
      out.write("             style=\"width: 100%;\"></div>\n");
      out.write("    </div>\n");
      out.write("</div>");
      out.write("\n");
      out.write("\n");
      out.write("            <section id=\"dashboard\"> \n");
      out.write("\n");
      out.write("                <div class=\"row\">\n");
      out.write("\n");
      out.write("                    ");
      out.write("<div style=\"height: 100%; position: fixed;\" class=\"span3\">\n");
      out.write("    <ul style=\"display: none;\"  class=\"menu hide\">\n");
      out.write("        <li class=\"item1\">\n");
      out.write("            <a  href=\"#\"><i class=\"icon-folder-open\"></i> Patient Management</a>\n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"index.jsp\">Front Desk </a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"opd.jsp\">Out Patient Department </a>\n");
      out.write("                </li>\n");
      out.write("\n");
      out.write("            </ul>\n");
      out.write("\n");
      out.write("        </li>\n");
      out.write("        <li class=\"item2\">\n");
      out.write("            <a href=\"#\"> <i class=\" icon-search\"></i> Consultation\n");
      out.write("            </a> \n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"consultingroom.jsp\">Patients <span></span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"#\">Appointments <span>6</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem3\">\n");
      out.write("                    <a href=\"#\">Recent Out Patients <span>2</span></a>\n");
      out.write("                </li> \n");
      out.write("                <li class=\"subitem4\">\n");
      out.write("                    <a href=\"#\">Recent In Patients <span>2</span></a>\n");
      out.write("                </li> \n");
      out.write("                <li class=\"subitem5\">\n");
      out.write("                    <a href=\"#\">Lab Results<span>2</span></a>\n");
      out.write("                </li> \n");
      out.write("            </ul>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"item3\">\n");
      out.write("            <a href=\"#\"><i class=\"icon-share\"></i> Sponsorship <span>340</span></a>\n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"#\">Cute Kittens <span>14</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"#\">Strange Stuff <span>6</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem3\">\n");
      out.write("                    <a href=\"#\">Automatic Fails <span>2</span></a>\n");
      out.write("                </li>\n");
      out.write("            </ul>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"item4\">\n");
      out.write("            <a href=\"#\"><i class=\"icon-check\"></i> Podcasts <span>222</span></a>\n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"#\">Cute Kittens <span>14</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"#\">Strange Stuff <span>6</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem3\">\n");
      out.write("                    <a href=\"#\">Automatic Fails <span>2</span></a>\n");
      out.write("                </li>\n");
      out.write("            </ul>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"item5\">\n");
      out.write("            <a href=\"#\"> <i class=\"icon-move\"></i> Robots <span>16</span></a>\n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"#\">Cute Kittens <span>14</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"#\">Strange Stuff <span>6</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem3\">\n");
      out.write("                    <a href=\"#\">Automatic Fails <span>2</span></a>\n");
      out.write("                </li>\n");
      out.write("            </ul>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"item1\">\n");
      out.write("            <a href=\"#\"><i class=\"icon-user\"></i> Friends <span>340</span></a>\n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"#\">Cute Kittens <span>14</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"#\">Strange Stuff <span>6</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem3\">\n");
      out.write("                    <a href=\"#\">Automatic Fails <span>2</span></a>\n");
      out.write("                </li>\n");
      out.write("            </ul>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"item2\">\n");
      out.write("            <a href=\"#\"><i class=\"icon-search\"></i> Videos <span>147</span></a>\n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"#\">Cute Kittens <span>14</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"#\">Strange Stuff <span>6</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem3\"\n");
      out.write("                    <a href=\"#\">Automatic Fails <span>2</span></a>\n");
      out.write("                </li>\n");
      out.write("            </ul>\n");
      out.write("        </li>\n");
      out.write("        <li class=\"item3\">\n");
      out.write("            <a href=\"#\"><i class=\"icon-share\"></i> Galleries <span>340</span></a>\n");
      out.write("            <ul>\n");
      out.write("                <li class=\"subitem1\">\n");
      out.write("                    <a href=\"#\">Cute Kittens <span>14</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem2\">\n");
      out.write("                    <a href=\"#\">Strange Stuff <span>6</span></a>\n");
      out.write("                </li>\n");
      out.write("                <li class=\"subitem3\">\n");
      out.write("                    <a href=\"#\">Automatic Fails <span>2</span></a>\n");
      out.write("                </li>\n");
      out.write("            </ul>\n");
      out.write("        </li>\n");
      out.write("\n");
      out.write("    </ul>\n");
      out.write("</div>");
      out.write("\n");
      out.write("\n");
      out.write("                    <div style=\"display: none;\" class=\"span9 offset3 thumbnail well content hide\">\n");
      out.write("\n");
      out.write("                        <ul style=\"margin-left: 0px;\" class=\"breadcrumb\">\n");
      out.write("                            <li>\n");
      out.write("                                <a>Consultation Room</a>\n");
      out.write("                            </li>\n");
      out.write("                        </ul>\n");
      out.write("\n");
      out.write("\n");
      out.write("                        <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" class=\"display example table\">\n");
      out.write("                            <thead>\n");
      out.write("\n");
      out.write("                                <tr>\n");
      out.write("                                    <th>Folder Number </th>\n");
      out.write("                                    <th>Full Name </th>\n");
      out.write("                                    <th>Sponsor</th>\n");
      out.write("                                    <th>Registered On</th>\n");
      out.write("                                    <th> </th>\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                                </tr>\n");
      out.write("                            </thead>\n");
      out.write("                            <tbody>\n");
      out.write("                                ");

                                    HMSHelper mgr = new HMSHelper();
                                    DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
                                    SimpleDateFormat formatter = new SimpleDateFormat("EEEE, d MMMM yyyy");
                                    Visitationtable vs = null;
                                    List investigations = null;
                                    List treatments = null;
                                    Date date = new Date();
                                    //System.out.println(dateFormat.format(date));
                                    List visits = mgr.listUnitVisitations("Room 1", dateFormat.format(date));
                                    for (int i = 0; i < visits.size(); i++) {
                                        Visitationtable visit = (Visitationtable) visits.get(i);
                                        vs = mgr.currentVisitations(visit.getVisitid());

                                        List patientHistory = mgr.patientHistory(visit.getPatientid());
                                
      out.write("\n");
      out.write("                                <tr>\n");
      out.write("                                    <td>\n");
      out.write("                                        <a href=\"condetails.jsp?patientid=");
      out.print(visit.getPatientid());
      out.write("&id=");
      out.print(visit.getVisitid());
      out.write("\"> \n");
      out.write("                                            ");
      out.print( visit.getPatientid());
      out.write(" </a> \n");
      out.write("                                    </td>\n");
      out.write("                                    <td>\n");
      out.write("                                        ");
      out.print( mgr.getPatientByID(visit.getPatientid()).getFname());
      out.write(",  ");
      out.print( mgr.getPatientByID(visit.getPatientid()).getLname());
      out.write(" \n");
      out.write("                                    </td>\n");
      out.write("                                    <td>\n");
      out.write("                                        ");
      out.print( mgr.getSponsor(mgr.sponsorshipDetails(visit.getPatientid()).getSponsorid()).getSponsorname());
      out.write("\n");
      out.write("                                    </td>\n");
      out.write("                                    <td>\n");
      out.write("                                        ");
      out.print( formatter.format(mgr.getPatientByID(visit.getPatientid()).getDateofregistration()));
      out.write("\n");
      out.write("                                    </td>\n");
      out.write("                                    <td>\n");
      out.write("                                        <a id=\"");
      out.print(visit.getPatientid());
      out.print(visit.getVisitid());
      out.write("link\"  class=\"visitlink btn btn-info\"> <i class=\"icon-pencil icon-white\"> </i> Consultation </a>\n");
      out.write("                                    </td>\n");
      out.write("                                </tr>\n");
      out.write("                                ");
 }

                                
      out.write("\n");
      out.write("                            </tbody>\n");
      out.write("                        </table>\n");
      out.write("                    </div>\n");
      out.write("                </div> \n");
      out.write("            </section>\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("        </div>\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("        ");
      out.write("<footer style=\"display: none;\" class=\"footer hide\">\n");
      out.write("    <p style=\"text-align: center;\" class=\"pull-right\">\n");
      out.write("        <img src=\"images/logo.png\" width=\"100px;\" />\n");
      out.write("    </p>\n");
      out.write("</footer>");
      out.write("\n");
      out.write("\n");
      out.write("    </div><!-- /container -->\n");
      out.write("\n");
      out.write("\n");
      out.write("    ");
      out.write("<!-- Le javascript\n");
      out.write("================================================== -->\n");
      out.write("<!-- Placed at the end of the document so the pages load faster -->\n");
      out.write("<script src=\"js/jquery.js\"></script>\n");
      out.write("\n");
      out.write("<script src=\"js/bootstrap-dropdown.js\"></script>\n");
      out.write("<script src=\"js/bootstrap-scrollspy.js\"></script>\n");
      out.write("\n");
      out.write("<script src=\"js/bootstrap-collapse.js\"></script>\n");
      out.write("<script src=\"js/bootstrap-tooltip.js\"></script>\n");
      out.write("\n");
      out.write("<script src=\"js/bootstrap-popover.js\"></script>\n");
      out.write("<script src=\"js/application.js\"></script>\n");
      out.write("\n");
      out.write("<script type=\"text/javascript\" src=\"js/jquery-ui-1.8.16.custom.min.js\"></script>\n");
      out.write("<script type=\"text/javascript\" src=\"third-party/jQuery-UI-Date-Range-Picker/js/date.js\"></script>\n");
      out.write("\n");
      out.write("<script type=\"text/javascript\" src=\"third-party/jQuery-UI-Date-Range-Picker/js/daterangepicker.jQuery.js\"></script>\n");
      out.write("<script src=\"third-party/wijmo/jquery.mousewheel.min.js\" type=\"text/javascript\"></script>\n");
      out.write("\n");
      out.write("<script src=\"third-party/wijmo/jquery.bgiframe-2.1.3-pre.js\" type=\"text/javascript\"></script>\n");
      out.write("<script src=\"third-party/wijmo/jquery.wijmo-open.1.5.0.min.js\" type=\"text/javascript\"></script>\n");
      out.write("\n");
      out.write("<script src=\"third-party/jQuery-UI-FileInput/js/enhance.min.js\" type=\"text/javascript\"></script>\n");
      out.write("<script src=\"third-party/jQuery-UI-FileInput/js/fileinput.jquery.js\" type=\"text/javascript\"></script>\n");
      out.write("\n");
      out.write("<script type=\"text/javascript\" src=\"js/tablecloth.js\"></script>   \n");
      out.write("<script type=\"text/javascript\" src=\"js/demo.js\"></script>    \n");
      out.write("\n");
      out.write("<!--initiate accordion-->\n");
      out.write("<script type=\"text/javascript\">\n");
      out.write("    $(function() {\n");
      out.write("       \n");
      out.write("     \n");
      out.write("        var menu_ul = $('.menu > li > ul'), menu_a = $('.menu > li > a');\n");
      out.write("\n");
      out.write("        menu_ul.hide();\n");
      out.write("       \n");
      out.write("        $(\".menu\").fadeIn();\n");
      out.write("        $(\".content\").fadeIn();\n");
      out.write("        $(\".navbar\").fadeIn();\n");
      out.write("        $(\".footer\").fadeIn();\n");
      out.write("        $(\".subnav\").fadeIn();\n");
      out.write("        $(\".progress1\").hide();\n");
      out.write("        \n");
      out.write("        menu_a.click(function(e) {\n");
      out.write("            e.preventDefault();\n");
      out.write("            if(!$(this).hasClass('active')) {\n");
      out.write("                menu_a.removeClass('active');\n");
      out.write("                menu_ul.filter(':visible').slideUp('normal');\n");
      out.write("                $(this).addClass('active').next().stop(true, true).slideDown('normal');\n");
      out.write("            } else {\n");
      out.write("                $(this).removeClass('active');\n");
      out.write("                $(this).next().stop(true, true).slideUp('normal');\n");
      out.write("            }\n");
      out.write("        });\n");
      out.write("\n");
      out.write("    });\n");
      out.write("\n");
      out.write("</script>\n");
      out.write("\n");
      out.write("<script type=\"text/javascript\" language=\"javascript\" src=\"js/jquery.dataTables.js\"></script>\n");
      out.write("<script type=\"text/javascript\" charset=\"utf-8\">\n");
      out.write("    $(document).ready(function() {\n");
      out.write("     \n");
      out.write("        $('.example').dataTable({\n");
      out.write("            \"bJQueryUI\" : true,\n");
      out.write("            \"sScrollY\": \"300px\",\n");
      out.write("            \"sPaginationType\" : \"full_numbers\",\n");
      out.write("            \"iDisplayLength\" : 25,\n");
      out.write("            \"aaSorting\" : [],\n");
      out.write("            \"bSort\" : true\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".continue\").click(function() {\n");
      out.write("\n");
      out.write("            $(\".first_half\").slideUp();\n");
      out.write("\n");
      out.write("            $(\".second_half\").slideDown();\n");
      out.write("\n");
      out.write("            $(\".pre_first_half\").find(\"div\").addClass(\"success\");\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".proceed\").click(function() {\n");
      out.write("\n");
      out.write("            $(\".second_half\").slideUp();\n");
      out.write("\n");
      out.write("            $(\".third_half\").slideDown();\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".back\").click(function() {\n");
      out.write("\n");
      out.write("            $(\".first_half\").slideDown();\n");
      out.write("\n");
      out.write("            $(\".second_half\").slideUp();\n");
      out.write("\n");
      out.write("            $(\".third_half\").slideUp();\n");
      out.write("\n");
      out.write("            $(\".pre_first_half\").find(\"div\").removeClass(\"success\");\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".previous\").click(function() {\n");
      out.write("\n");
      out.write("            $(\".second_half\").slideDown();\n");
      out.write("\n");
      out.write("            $(\".third_half\").slideUp();\n");
      out.write("\n");
      out.write("            $(\".first_half\").slideUp();\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $('.close_dialog').click(function() {\n");
      out.write("\n");
      out.write("            $('#dialog').dialog('close');\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".patient\").popover({\n");
      out.write("\n");
      out.write("            placement : 'right',\n");
      out.write("            animation : true\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".patient_visit\").popover({\n");
      out.write("\n");
      out.write("            placement : 'top',\n");
      out.write("            animation : true\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".btn\").tooltip({\n");
      out.write("\n");
      out.write("            placement : 'bottom',\n");
      out.write("            animation : true\n");
      out.write("\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".update_sponsor\").click(function() {\n");
      out.write("            $(\".sponsor_panel\").slideToggle();\n");
      out.write("            $(\".vitals_panel\").slideUp();\n");
      out.write("            $(\".history_panel\").slideUp();\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".update_vitals\").click(function() {\n");
      out.write("            $(\".sponsor_panel\").slideUp();\n");
      out.write("            $(\".vitals_panel\").slideToggle();\n");
      out.write("            $(\".history_panel\").slideUp();\n");
      out.write("        });\n");
      out.write("\n");
      out.write("        $(\".update_history\").click(function() {\n");
      out.write("            $(\".sponsor_panel\").slideUp();\n");
      out.write("            $(\".vitals_panel\").slideUp();\n");
      out.write("            $(\".history_panel\").slideToggle();\n");
      out.write("        });\n");
      out.write("        \n");
      out.write("        $(\".slideup\").click(function() {\n");
      out.write("            $(\".sponsor_panel\").slideUp();\n");
      out.write("            $(\".vitals_panel\").slideUp();\n");
      out.write("            $(\".history_panel\").slideUp();      \n");
      out.write("        })\n");
      out.write("     \n");
      out.write("    });\n");
      out.write("\n");
      out.write("    function updateView() {\n");
      out.write("                \n");
      out.write("        var str = document.getElementById(\"unitid\").value;\n");
      out.write("\n");
      out.write("        if (str==\"\")\n");
      out.write("        {\n");
      out.write("            document.getElementById(\"tt\").innerHTML=\"\";\n");
      out.write("            return;\n");
      out.write("        } \n");
      out.write("        if (window.XMLHttpRequest)\n");
      out.write("        {// code for IE7+, Firefox, Chrome, Opera, Safari\n");
      out.write("            xmlhttp=new XMLHttpRequest();\n");
      out.write("        }\n");
      out.write("        else\n");
      out.write("        {// code for IE6, IE5\n");
      out.write("            xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\n");
      out.write("        }\n");
      out.write("        xmlhttp.onreadystatechange=function()\n");
      out.write("        {\n");
      out.write("            if (xmlhttp.readyState==4 && xmlhttp.status==200)\n");
      out.write("            { \n");
      out.write("                if(xmlhttp.responseText > 0){\n");
      out.write("                    alert(\"successful\")\n");
      out.write("                }else{\n");
      out.write("                    alert(\"successful\")\n");
      out.write("                }\n");
      out.write("                       \n");
      out.write("            }\n");
      out.write("        }\n");
      out.write("        xmlhttp.open(\"GET\",\"action/forward.jsp?action=forward.jsp&unitid=\"+str,true);\n");
      out.write("        xmlhttp.send();\n");
      out.write("            \n");
      out.write("    }\n");
      out.write("       \t\n");
      out.write("           \n");
      out.write("</script>");
      out.write("\n");
      out.write("\n");
      out.write("    ");
   String file = "";
        String file2 = "";

        /*  if (mgr.sponsorshipDetails(visit.getPatientid()).getType().equalsIgnoreCase("nhis")) {
         file = "gettreatment.jsp";
         } else {
         file = "getnhistreatment.jsp";
         }*/

        for (int i = 0; i < visits.size(); i++) {
            Visitationtable visit = (Visitationtable) visits.get(i);
            vs = mgr.currentVisitations(visit.getVisitid());
            List patientHistory = mgr.patientHistory(visit.getPatientid());
    
      out.write("\n");
      out.write("    <script type=\"text/javascript\">\n");
      out.write("        $(document).ready(function(){\n");
      out.write("                                                      \n");
      out.write("               \n");
      out.write("            $('#");
      out.print(visit.getPatientid());
      out.print(visit.getVisitid());
      out.write("').dialog({\n");
      out.write("                autoOpen : false,\n");
      out.write("                width : 600,\n");
      out.write("                modal :true,\n");
      out.write("                position : \"top\"\n");
      out.write("\t\t\n");
      out.write("            });\n");
      out.write("                \n");
      out.write("            $('#");
      out.print(visit.getPatientid());
      out.print(visit.getVisitid());
      out.write("link').click(function(){\n");
      out.write("                   \n");
      out.write("                $('#");
      out.print(visit.getPatientid());
      out.print(visit.getVisitid());
      out.write("').dialog('open');\n");
      out.write("                return false;\n");
      out.write("            });\n");
      out.write("                \n");
      out.write("                                                        \n");
      out.write("                \n");
      out.write("        });\n");
      out.write("    </script>\n");
      out.write("\n");
      out.write("    <div style=\"max-height: 600px; y-overflow: scroll; display: none;\" class=\"visit hide\" id=\"");
      out.print(visit.getPatientid());
      out.print(visit.getVisitid());
      out.write("\"  title=\"Consultation for ");
      out.print( mgr.getPatientByID(visit.getPatientid()).getFname());
      out.write(",  ");
      out.print( mgr.getPatientByID(visit.getPatientid()).getLname());
      out.write("   \">\n");
      out.write("\n");
      out.write("\n");
      out.write("        <div class=\"btn-toolbar center\">\n");
      out.write("            <div class=\"btn-group\">\n");
      out.write("                <button class=\"btn btn-info history_link bar\">History</button>\n");
      out.write("                <button class=\"btn btn-info vital_link bar\">Vitals </button>\n");
      out.write("                <button class=\"btn btn-info diagnosis_link bar\">Diagnosis</button>\n");
      out.write("                <button class=\"btn btn-info laboratory_link bar \">Lab Request</button>\n");
      out.write("                <button class=\"btn btn-info results_link bar\">Lab Results</button>\n");
      out.write("                <button class=\"btn btn-info prescription_link bar\">Prescription</button>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("        <form action=\"action/labnpharmactions.jsp\" method=\"post\" id=\"frm\">\n");
      out.write("            <div style=\"display: block;\" class=\"well thumbnail center vital\">\n");
      out.write("                <ul class=\"breadcrumb\">\n");
      out.write("                    <li>\n");
      out.write("                        <a style=\"text-align: center;\">Vitals</a>\n");
      out.write("                    </li>\n");
      out.write("\n");
      out.write("                </ul>\n");
      out.write("\n");
      out.write("                <table class=\"table\">\n");
      out.write("\n");
      out.write("                    <thead style=\"color: black;\">\n");
      out.write("                        <tr>\n");
      out.write("                            <th>\n");
      out.write("                                Visit Date\n");
      out.write("                            </th>\n");
      out.write("                            <th>\n");
      out.write("                                Vital Details\n");
      out.write("                            </th>\n");
      out.write("\n");
      out.write("                        </tr>\n");
      out.write("                    </thead>\n");
      out.write("                    <tbody>\n");
      out.write("                        ");
 for (int r = 0; r < patientHistory.size(); r++) {
                                Visitationtable vps = (Visitationtable) patientHistory.get(r);

                        
      out.write("\n");
      out.write("                        <tr>\n");
      out.write("\n");
      out.write("                            <td>\n");
      out.write("                                ");
      out.print(vps.getDate());
      out.write("\n");
      out.write("                            </td>\n");
      out.write("\n");
      out.write("                            <td>\n");
      out.write("                                ");
      out.print(vps.getVitals());
      out.write("\n");
      out.write("                            </td>\n");
      out.write("\n");
      out.write("                        </tr>\n");
      out.write("                        ");
}
      out.write("\n");
      out.write("                    </tbody>\n");
      out.write("\n");
      out.write("                </table>\n");
      out.write("\n");
      out.write("                <textarea style=\"width: 95%\" name=\"vitals\">");
      out.print( vs.getVitals());
      out.write("\n");
      out.write("                        \n");
      out.write("                </textarea>\n");
      out.write("\n");
      out.write("            </div>\n");
      out.write("            <div style=\"display: none;\" class=\"well thumbnail center diagnosis\">\n");
      out.write("                <ul class=\"breadcrumb\">\n");
      out.write("                    <li>\n");
      out.write("                        <a style=\"text-align: center;\">Diagnosis</a>\n");
      out.write("                    </li>\n");
      out.write("\n");
      out.write("                </ul>\n");
      out.write("                <select id=\"diagnosis\" onchange =\"addDiagnosis()\">\n");
      out.write("                    ");

                        List diagnoses = mgr.listDiagnosis();
                        for (int t = 0; t < diagnoses.size(); t++) {
                            Diagnosis diagnosis = (Diagnosis) diagnoses.get(t);
                    
      out.write("\n");
      out.write("                    <option value=\"");
      out.print(diagnosis.getDiagnosis());
      out.write('>');
      out.write('<');
      out.print(diagnosis.getId());
      out.write('"');
      out.write('>');
      out.print(diagnosis.getDiagnosis());
      out.write("</option> \n");
      out.write("                    ");
 }

                    
      out.write("\n");
      out.write("                </select>\n");
      out.write("                <!--  <script>\n");
      out.write("                      $(\"#diagnosis_field\").autocomplete(\"getdiag.jsp\");\n");
      out.write("                  </script> \n");
      out.write("                  <input type=\"text\" style=\"width: 95%;\" id=\"diagnosis_field\" name=\"q\"/> <button class=\"btn btn-small btn-info\" onclick=\"addDiagnosis()\"> <i class=\"icon-white icon-pencil\"> </i> Add </button> <br />\n");
      out.write("                --> <br/>\n");
      out.write("                <textarea style=\"width: 95%\" name=\"diagnosis\" id=\"dd\" ></textarea>\n");
      out.write("                <br/>\n");
      out.write("\n");
      out.write("            </div>\n");
      out.write("            <div style=\"display: none;\" class=\"well thumbnail center history\">\n");
      out.write("                <ul class=\"breadcrumb\">\n");
      out.write("                    <li>\n");
      out.write("                        <a style=\"text-align: center;\">History</a>\n");
      out.write("                    </li>\n");
      out.write("\n");
      out.write("                </ul>\n");
      out.write("\n");
      out.write("                <table class=\"\">\n");
      out.write("                    <thead>\n");
      out.write("                        <tr>\n");
      out.write("                            <td>\n");
      out.write("                                Visit Date\n");
      out.write("                            </td>\n");
      out.write("                            <td>\n");
      out.write("\n");
      out.write("                                Investigation\n");
      out.write("                            </td>\n");
      out.write("                            <td>\n");
      out.write("\n");
      out.write("                                Diagnosis\n");
      out.write("                            </td>\n");
      out.write("                            <td>\n");
      out.write("\n");
      out.write("                                Treatment\n");
      out.write("                            </td>\n");
      out.write("                        </tr>\n");
      out.write("\n");
      out.write("                    </thead>\n");
      out.write("                    <tbody>\n");
      out.write("\n");
      out.write("                        ");
 for (int r = 0; r < patientHistory.size(); r++) {
                                Visitationtable vps = (Visitationtable) patientHistory.get(r);
                                List pdiagnosis = mgr.patientDiagnosis(vps.getVisitid());
                                List pInvestigation = mgr.patientInvestigation(vps.getVisitid());
                                List pTreatment = mgr.patientTreatment(vps.getVisitid());
                        
      out.write("\n");
      out.write("                        <tr>\n");
      out.write("\n");
      out.write("                            <td>\n");
      out.write("                                ");
      out.print(vps.getDate());
      out.write("\n");
      out.write("                            </td>\n");
      out.write("\n");
      out.write("                            <td>\n");
      out.write("                                ");
 for (int s = 0; s < pdiagnosis.size(); s++) {
                                        Patientdiagnosis pd = (Patientdiagnosis) pdiagnosis.get(s);
                                        if (pd != null) {
                                
      out.write("\n");
      out.write("                                <h5>");
      out.print( pd.getDiagnosis());
      out.write("</h5> \n");
      out.write("                                ");
}
                                    }
      out.write("\n");
      out.write("                            </td>\n");
      out.write("                            <td>\n");
      out.write("                                ");
 for (int s = 0; s < pInvestigation.size(); s++) {
                                        Patientinvestigation pi = (Patientinvestigation) pInvestigation.get(s);
                                        if (pi != null) {
                                
      out.write("\n");
      out.write("                                <h5>");
      out.print( pi.getInvestigation());
      out.write("</h5> \n");
      out.write("                                ");
 }
                                    }
      out.write("\n");
      out.write("                            </td>\n");
      out.write("                            <td>\n");
      out.write("                                ");
 for (int s = 0; s < pTreatment.size(); s++) {
                                        Patienttreatment pt = (Patienttreatment) pTreatment.get(s);
                                        if (pt != null) {
                                
      out.write("\n");
      out.write("                                <h5>");
      out.print( pt.getTreatment());
      out.write("</h5> \n");
      out.write("                                ");
 }
                                    }
      out.write("\n");
      out.write("                            </td>\n");
      out.write("\n");
      out.write("                        </tr>\n");
      out.write("                        ");
}
      out.write("\n");
      out.write("\n");
      out.write("                    </tbody>\n");
      out.write("\n");
      out.write("                </table>\n");
      out.write("                <!--       ");
  if (visits != null) {
                        for (int n = 0; n < visits.size(); n++) {
                            visit = (Visitationtable) visits.get(n);
      out.write("\n");
      out.write("       \n");
      out.write("                       <h5><a href=\"#?id=");
      out.print(visit.getVisitid());
      out.write("\" onclick=\"showdetails(");
      out.print(visit.getVisitid());
      out.write(")\">");
      out.print(visit.getDate());
      out.write("</h5>\n");
      out.write("       \n");
      out.write("                       <div id=\"");
      out.print(visit.getVisitid());
      out.write("\">\n");
      out.write("                           <h3>");
      out.print(visit.getVitals());
      out.write("</h3>\n");
      out.write("                           <table class=\"table\">\n");
      out.write("                               <tr>\n");
      out.write("                                   <td>Diagnosis</td> \n");
      out.write("                                   <td>Investigation</td>\n");
      out.write("                                   <td>Drugs</td>\n");
      out.write("                               </tr>\n");
      out.write("                               <tr>\n");
      out.write("                                   <td>\n");
      out.write("                ");
 List diagObjs = mgr.patientDiagnosis(visit.getVisitid());
                    if (diagObjs != null) {
                        for (int r = 0; r < diagObjs.size(); r++) {
                            Patientdiagnosis diagObj = (Patientdiagnosis) diagObjs.get(r);
                
      out.write("\n");
      out.write("                ");
      out.print( diagObj.getDiagnosis());
      out.write("\n");
      out.write("                ");
   }
                    }
      out.write("\n");
      out.write("            </td>\n");
      out.write("            <td>\n");
      out.write("               \n");
      out.write("            </td>\n");
      out.write("            <td>\n");
      out.write("               \n");
      out.write("            </td>\n");
      out.write("        </tr>\n");
      out.write("    </table>   \n");
      out.write("</div>-->\n");
      out.write("            </div>\n");
      out.write("            <div style=\"display: none;\" class=\"well thumbnail center prescription\">\n");
      out.write("                <ul class=\"breadcrumb\">\n");
      out.write("                    <li>\n");
      out.write("                        <a>Prescription Form</a>\n");
      out.write("                    </li>\n");
      out.write("\n");
      out.write("                </ul>\n");
      out.write("\n");
      out.write("                <div id=\"treat\">\n");
      out.write("\n");
      out.write("                    <table> \n");
      out.write("\n");
      out.write("                        <thead>\n");
      out.write("\n");
      out.write("                            <tr>\n");
      out.write("                                <th style=\"color: #000;\">\n");
      out.write("                                    Name of Drug\n");
      out.write("                                </th>\n");
      out.write("                                <th style=\"color: #000;\">\n");
      out.write("                                    Type \n");
      out.write("                                </th>\n");
      out.write("                                <th style=\"color: #000;\">\n");
      out.write("                                    Quantity \n");
      out.write("                                </th>\n");
      out.write("\n");
      out.write("                            </tr>\n");
      out.write("\n");
      out.write("                        </thead>\n");
      out.write("                        <tbody>                     \n");
      out.write("\n");
      out.write("                            <tr>\n");
      out.write("\n");
      out.write("                                <td> \n");
      out.write("                                    <!--  <input type=\"text\" class=\"input-xlarge\"/> -->\n");
      out.write("                                    <!-- <script>\n");
      out.write("                                         $(\"#treatment_field\").autocomplete(\"gettreatment.jsp\");\n");
      out.write("                                     </script> \n");
      out.write("                                     <input type=\"text\" style=\"width: 95%;\" id=\"treatment_field\"/> <button class=\"btn btn-small btn-info\" onclick=\"addTreatment()\"> <i class=\"icon-white icon-pencil\"> </i> Add </button> \n");
      out.write("                                    --> ");

                                        if (mgr.sponsorshipDetails(visit.getPatientid()).getType().equalsIgnoreCase("nhis")) {
      out.write("\n");
      out.write("\n");
      out.write("                                    <select  id=\"treatment\" onchange = \"addTreatment()\">\n");
      out.write("                                        ");

                                            treatments = mgr.listNhisTreatment();
                                            if (treatments != null) {
                                                for (int v = 0; v < treatments.size(); v++) {
                                                    Nhistreatment treatment = (Nhistreatment) treatments.get(v);
                                        
      out.write("\n");
      out.write("                                        <option value=\"");
      out.print(treatment.getDrug());
      out.write('>');
      out.write('<');
      out.print(treatment.getCode());
      out.write('"');
      out.write('>');
      out.print(treatment.getDrug());
      out.write("</option> \n");
      out.write("                                        ");
 }
                                            }
                                        
      out.write("\n");
      out.write("                                    </select>\n");
      out.write("                                    ");
  } else {
      out.write("                                      \n");
      out.write("                                    <select  id=\"treatment\" onchange = \"addTreatment()\">\n");
      out.write("                                        ");

                                            treatments = mgr.listTreatments();
                                            if (treatments != null) {
                                                for (int v = 0; v < treatments.size(); v++) {
                                                    Treatment treatment = (Treatment) treatments.get(v);
                                        
      out.write("\n");
      out.write("                                        <option value=\"");
      out.print(treatment.getTreatment());
      out.write('>');
      out.write('<');
      out.print(treatment.getTreatmentid());
      out.write('"');
      out.write('>');
      out.print(treatment.getTreatment());
      out.write("</option> \n");
      out.write("                                        ");
 }
                                            }
                                        
      out.write("\n");
      out.write("                                    </select>\n");
      out.write("\n");
      out.write("                                    ");
   }
                                    
      out.write("                                  \n");
      out.write("\n");
      out.write("                                </td>\n");
      out.write("\n");
      out.write("                                <td>\n");
      out.write("                                    <select class=\"input-small\" name=\"drugtype\" id=\"drugtype\" onchange=\"addType()\">\n");
      out.write("                                        <option value=\"Tab\">\n");
      out.write("                                            Tab\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"Syrup\">\n");
      out.write("                                            Syrup\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"Capsule\">\n");
      out.write("                                            Capsule\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"Cream\">\n");
      out.write("                                            Cream\n");
      out.write("                                        </option>\n");
      out.write("                                    </select>\n");
      out.write("                                </td>\n");
      out.write("                                <td>                                    <select class=\"input-mini\" name=\"qty\" id=\"qty\" onchange=\"addQuantity()\">\n");
      out.write("                                        <option value=\"0\">\n");
      out.write("                                            0\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"1\">\n");
      out.write("                                            1\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"2\">\n");
      out.write("                                            2\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"3\">\n");
      out.write("                                            3\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"4\">\n");
      out.write("                                            4\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"5\">\n");
      out.write("                                            5\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"6\">\n");
      out.write("                                            6\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"7\">\n");
      out.write("                                            7\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"8\">\n");
      out.write("                                            8\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"9\">\n");
      out.write("                                            9\n");
      out.write("                                        </option>\n");
      out.write("                                        <option value=\"10\">\n");
      out.write("                                            10\n");
      out.write("                                        </option>\n");
      out.write("\n");
      out.write("                                    </select>\n");
      out.write("                                </td>\n");
      out.write("\n");
      out.write("                            </tr>\n");
      out.write("                        </tbody>\n");
      out.write("                    </table>\n");
      out.write("                    <table>\n");
      out.write("                        <thead>\n");
      out.write("                            <tr>\n");
      out.write("                                <th style=\"color: #000;\">\n");
      out.write("                                    Recommended Dosage\n");
      out.write("                                </th>\n");
      out.write("                                <th>\n");
      out.write("\n");
      out.write("                                </th>\n");
      out.write("                            </tr>\n");
      out.write("                        </thead>\n");
      out.write("                        <tbody>\n");
      out.write("                            <tr>\n");
      out.write("                                <td>\n");
      out.write("\n");
      out.write("                                    <input type=\"text\" class=\"input-xlarge\" name=\"dosage\" id=\"dosage\"/>\n");
      out.write("                                </td>\n");
      out.write("\n");
      out.write("                                <td class=\"center\">\n");
      out.write("                                    <button class=\"btn btn-info span2\" onclick=\"addDosage();return false\">\n");
      out.write("                                        <i class=\"icon-white icon-pencil\"> </i>   Add\n");
      out.write("                                    </button>\n");
      out.write("                                </td>\n");
      out.write("                            </tr>\n");
      out.write("                        </tbody>\n");
      out.write("\n");
      out.write("\n");
      out.write("                    </table>\n");
      out.write("\n");
      out.write("\n");
      out.write("                    <textarea style=\"width: 95%\" name=\"treatmentone\" id=\"ss\"></textarea>\n");
      out.write("                   \n");
      out.write("                        <textarea style=\"width: 95%\" name=\"treatment\" id=\"tt\" ></textarea> \n");
      out.write("                         <div id=\"\" style=\"display: none;\">\n");
      out.write("                    </div>\n");
      out.write("                    <b> <u> Prescription Note </u> </b> <br />  <br />\n");
      out.write("\n");
      out.write("                    <textarea style=\"width: 95%\"  name=\"prescription_notes\" ></textarea> \n");
      out.write("\n");
      out.write("                </div>\n");
      out.write("            </div>\n");
      out.write("            <div style=\"display: none;\" class=\"well thumbnail center laboratory\">\n");
      out.write("                <ul class=\"breadcrumb\">\n");
      out.write("                    <li>\n");
      out.write("                        <a href=\"#\" onclick=\"showdInvestigation()\">Laboratory Request Form</a>\n");
      out.write("                    </li>\n");
      out.write("\n");
      out.write("                </ul>\n");
      out.write("                <div class=\"center\" id=\"lab\">\n");
      out.write("\n");
      out.write("                    Investigation <br />\n");
      out.write("                    <!-- <script>\n");
      out.write("                         $(\"#investigation_field\").autocomplete(");
      out.print(file2);
      out.write(");\n");
      out.write("                     </script> \n");
      out.write("                     <input type=\"text\" style=\"width: 95%;\" id=\"investigation_field\"/> <button class=\"btn btn-small btn-info\" onclick=\"addInvestigation()\"> <i class=\"icon-white icon-pencil\"> </i> Add </button> \n");
      out.write(" \n");
      out.write("                     <button class=\"btn btn-info\">\n");
      out.write("                         <i class=\"icon-white icon-pencil\"> </i>   Add\n");
      out.write("                     </button>\n");
      out.write("                    -->\n");
      out.write("                    ");
 if (mgr.sponsorshipDetails(visit.getPatientid()).getType().equalsIgnoreCase("nhis")) {
      out.write("\n");
      out.write("                    <select  id=\"test\" onchange = \"addInvestigation()\">\n");
      out.write("                        ");

                            // List treatments = mgr.patientTreatment(int visitationid);
                            investigations = mgr.listNhisInvesigation();
                            if (investigations != null) {
                                for (int p = 0; p < investigations.size(); p++) {
                                    Nhisinvestigation investigation = (Nhisinvestigation) investigations.get(p);
                        
      out.write("\n");
      out.write("                        <option value=\"");
      out.print(investigation.getInvestigation());
      out.write('>');
      out.write('<');
      out.print( investigation.getCode());
      out.write('"');
      out.write('>');
      out.print(investigation.getInvestigation());
      out.write("</option> \n");
      out.write("                        ");
}
      out.write("\n");
      out.write("                    </select>\n");
      out.write("                    ");
}
                            } else {
      out.write("\n");
      out.write("                    <select  id=\"test\" onchange = \"addInvestigation()\">\n");
      out.write("                        ");

                            // List treatments = mgr.patientTreatment(int visitationid);
                            investigations = mgr.listInvestigation();
                            if (investigations != null) {
                                for (int p = 0; p < investigations.size(); p++) {
                                    Investigation investigation = (Investigation) investigations.get(p);
                        
      out.write("\n");
      out.write("                        <option value=\"");
      out.print(investigation.getInvestigation());
      out.write('>');
      out.write('<');
      out.print( investigation.getInvestigationId());
      out.write('"');
      out.write('>');
      out.print(investigation.getInvestigation());
      out.write("</option> \n");
      out.write("                        ");
 }
      out.write("\n");
      out.write("                    </select> \n");
      out.write("                    ");
 }
                        }
      out.write("\n");
      out.write("\n");
      out.write("                    <br />\n");
      out.write("\n");
      out.write("\n");
      out.write("                    <textarea style=\"width: 95%\" name=\"investigation\" id=\"lb\"></textarea> \n");
      out.write("                    <br />\n");
      out.write("                    Investigation Note <br />  <br />\n");
      out.write("                    <textarea style=\"width: 95%\" name=\"investigation_note\"></textarea> \n");
      out.write("                </div>\n");
      out.write("\n");
      out.write("            </div>\n");
      out.write("            <div style=\"display: none;\" class=\"well thumbnail center results\">\n");
      out.write("                <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" class=\"display example table\">\n");
      out.write("\n");
      out.write("                    <thead>\n");
      out.write("                        <tr>\n");
      out.write("                            <th>\n");
      out.write("                                <label style=\"width: 253px;\"> Test </label>\n");
      out.write("                            </th>\n");
      out.write("                            <th>\n");
      out.write("                                <label class=\"span4\"> Results </label>\n");
      out.write("                            </th>\n");
      out.write("\n");
      out.write("                        </tr>\n");
      out.write("                    </thead>\n");
      out.write("                    <tbody>\n");
      out.write("                        ");
 List results = mgr.patientInvestigation(visit.getVisitid());
                            for (int var = 0; var < results.size(); var++) {
                                Patientinvestigation patientinvestigation = (Patientinvestigation) results.get(var);
                        
      out.write("\n");
      out.write("                        <tr>\n");
      out.write("                            <td>\n");
      out.write("                                ");
      out.print(patientinvestigation.getInvestigation());
      out.write(" \n");
      out.write("                            </td>\n");
      out.write("                            <td>\n");
      out.write("                                ");
      out.print(patientinvestigation.getResult());
      out.write(" \n");
      out.write("                            </td>\n");
      out.write("                        </tr>\n");
      out.write("                        ");
}
      out.write("\n");
      out.write("                    </tbody>\n");
      out.write("\n");
      out.write("                </table>\n");
      out.write("            </div>\n");
      out.write("\n");
      out.write("            <div class=\"form-actions center\" >\n");
      out.write("                <select name=\"unitid\">\n");
      out.write("                    ");

                        List units = mgr.listUnits();
                        for (int j = 0; j < units.size(); j++) {
                            Units unit = (Units) units.get(j);
                    
      out.write("\n");
      out.write("                    <option value=\"");
      out.print(unit.getUnitname());
      out.write('"');
      out.write('>');
      out.print(unit.getUnitname());
      out.write("</option> \n");
      out.write("                    ");
 }

                    
      out.write("\n");
      out.write("                </select>\n");
      out.write("                <input type=\"hidden\" name=\"patientid\" value=\"");
      out.print(visit.getPatientid());
      out.write("\"/>\n");
      out.write("                <input type=\"hidden\" name=\"id\" value=\"");
      out.print(visit.getVisitid());
      out.write("\"/> \n");
      out.write("                <br />\n");
      out.write("\n");
      out.write("                <button type=\"submit\" name=\"action\" value=\"Forward\" class=\"btn btn-danger btn-large\">\n");
      out.write("\n");
      out.write("                    <i class=\"icon-white icon-arrow-right\"> </i> Forward\n");
      out.write("                </button>\n");
      out.write("\n");
      out.write("            </div>\n");
      out.write("        </form\n");
      out.write("\n");
      out.write("    </div>\n");
      out.write("    <div class=\"clear\"></div>\n");
      out.write("\n");
      out.write("    ");
 }
      out.write("\n");
      out.write("    ");
     }
        }
    
      out.write("\n");
      out.write("\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
